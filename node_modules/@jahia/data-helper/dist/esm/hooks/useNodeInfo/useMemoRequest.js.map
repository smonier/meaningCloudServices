{"version":3,"names":["validOptions","useRef","deepEquals","clean","obj","Object","fromEntries","entries","filter","_ref","_ref2","_slicedToArray","v","undefined","cleanVariables","_ref3","_ref4","cleanOptions","_ref5","_ref6","k","indexOf","useMemoRequest","variables","queryOptions","options","setResult","requestValue","requestRef","current"],"sources":["useMemoRequest.ts"],"sourcesContent":["import {NodeInfoOptions, validOptions} from './useNodeInfo.gql-queries';\nimport {useRef} from 'react';\nimport deepEquals from 'fast-deep-equal';\nimport {WatchQueryOptions} from '@apollo/client';\nimport {QueuedRequest} from './useNodeInfo';\n\nconst clean = (obj: object) => obj && Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== null && v !== undefined));\nconst cleanVariables = (obj: object) => obj && Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== null && v !== undefined));\nconst cleanOptions = (obj: NodeInfoOptions) => obj && Object.fromEntries(Object.entries(obj).filter(([k, v]) => v !== null && v !== undefined && validOptions.indexOf(k) !== -1));\n\nexport function useMemoRequest(variables: {[key:string]: unknown}, queryOptions: Partial<WatchQueryOptions>, options: NodeInfoOptions, setResult: (data:any) => void): [QueuedRequest, boolean] {\n    variables = cleanVariables(variables);\n    queryOptions = clean(queryOptions);\n    options = cleanOptions(options);\n\n    const requestValue = {variables, queryOptions, options, setResult};\n    const requestRef = useRef<QueuedRequest>(requestValue);\n\n    if (!deepEquals(variables, requestRef.current.variables) || !deepEquals(queryOptions, requestRef.current.queryOptions) || !deepEquals(options, requestRef.current.options)) {\n        requestRef.current = requestValue;\n    }\n\n    return [requestRef.current, requestRef.current === requestValue];\n}\n"],"mappings":";AAAA,SAAyBA,YAAY;AACrC,SAAQC,MAAM,QAAO,OAAO;AAC5B,OAAOC,UAAU,MAAM,iBAAiB;AAIxC,IAAMC,KAAK,GAAG,SAARA,KAAKA,CAAIC,GAAW;EAAA,OAAKA,GAAG,IAAIC,MAAM,CAACC,WAAW,CAACD,MAAM,CAACE,OAAO,CAACH,GAAG,CAAC,CAACI,MAAM,CAAC,UAAAC,IAAA;IAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,IAAA;MAAIG,CAAC,GAAAF,KAAA;IAAA,OAAME,CAAC,KAAK,IAAI,IAAIA,CAAC,KAAKC,SAAS;EAAA,EAAC,CAAC;AAAA;AAC9H,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIV,GAAW;EAAA,OAAKA,GAAG,IAAIC,MAAM,CAACC,WAAW,CAACD,MAAM,CAACE,OAAO,CAACH,GAAG,CAAC,CAACI,MAAM,CAAC,UAAAO,KAAA;IAAA,IAAAC,KAAA,GAAAL,cAAA,CAAAI,KAAA;MAAIH,CAAC,GAAAI,KAAA;IAAA,OAAMJ,CAAC,KAAK,IAAI,IAAIA,CAAC,KAAKC,SAAS;EAAA,EAAC,CAAC;AAAA;AACvI,IAAMI,YAAY,GAAG,SAAfA,YAAYA,CAAIb,GAAoB;EAAA,OAAKA,GAAG,IAAIC,MAAM,CAACC,WAAW,CAACD,MAAM,CAACE,OAAO,CAACH,GAAG,CAAC,CAACI,MAAM,CAAC,UAAAU,KAAA;IAAA,IAAAC,KAAA,GAAAR,cAAA,CAAAO,KAAA;MAAEE,CAAC,GAAAD,KAAA;MAAEP,CAAC,GAAAO,KAAA;IAAA,OAAMP,CAAC,KAAK,IAAI,IAAIA,CAAC,KAAKC,SAAS,IAAIb,YAAY,CAACqB,OAAO,CAACD,CAAC,CAAC,KAAK,CAAC,CAAC;EAAA,EAAC,CAAC;AAAA;AAEjL,OAAO,SAASE,cAAcA,CAACC,SAAkC,EAAEC,YAAwC,EAAEC,OAAwB,EAAEC,SAA6B,EAA4B;EAC5LH,SAAS,GAAGT,cAAc,CAACS,SAAS,CAAC;EACrCC,YAAY,GAAGrB,KAAK,CAACqB,YAAY,CAAC;EAClCC,OAAO,GAAGR,YAAY,CAACQ,OAAO,CAAC;EAE/B,IAAME,YAAY,GAAG;IAACJ,SAAS,EAATA,SAAS;IAAEC,YAAY,EAAZA,YAAY;IAAEC,OAAO,EAAPA,OAAO;IAAEC,SAAS,EAATA;EAAS,CAAC;EAClE,IAAME,UAAU,GAAG3B,MAAM,CAAgB0B,YAAY,CAAC;EAEtD,IAAI,CAACzB,UAAU,CAACqB,SAAS,EAAEK,UAAU,CAACC,OAAO,CAACN,SAAS,CAAC,IAAI,CAACrB,UAAU,CAACsB,YAAY,EAAEI,UAAU,CAACC,OAAO,CAACL,YAAY,CAAC,IAAI,CAACtB,UAAU,CAACuB,OAAO,EAAEG,UAAU,CAACC,OAAO,CAACJ,OAAO,CAAC,EAAE;IACxKG,UAAU,CAACC,OAAO,GAAGF,YAAY;EACrC;EAEA,OAAO,CAACC,UAAU,CAACC,OAAO,EAAED,UAAU,CAACC,OAAO,KAAKF,YAAY,CAAC;AACpE"}