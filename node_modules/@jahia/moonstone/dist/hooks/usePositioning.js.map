{"version":3,"sources":["usePositioning.tsx"],"names":["useEffect","useRef","useState","toPX","initialPosition","top","left","getPosition","anchorPosition","getClosestRelativeAncestor","el","parentElement","window","getComputedStyle","position","getAbsolutePositionCSS","anchorElOrigin","transformElOrigin","style","vertical","horizontal","transform","getAbsolutePosition","itemRef","menuRectangle","current","getBoundingClientRect","closestRelativeAncestorRect","stylePosition","width","document","body","clientWidth","height","clientHeight","getPositionRelativeToEl","resolvedAnchorEl","anchorElRectangle","point","bottom","right","hasParentWithTransform","getFixedPosition","anchorEl","hasTransform","closest","usePositioning","isDisplayed","setStylePosition","_stylePosition"],"mappings":";;;;;;;AAAA,SAAQA,SAAR,EAAmBC,MAAnB,EAA2BC,QAA3B,QAA0C,OAA1C;AACA,OAAOC,IAAP,MAAiB,OAAjB;AAkBA,IAAMC,eAAyB,GAAG;AAC9BC,EAAAA,GAAG,EAAE,CAAC,IADwB;AAE9BC,EAAAA,IAAI,EAAE,CAAC;AAFuB,CAAlC;;AAKA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,cAAD,EAAwC;AACxD,SAAO;AACHH,IAAAA,GAAG,EAAE,OAAOG,cAAc,CAACH,GAAtB,KAA8B,QAA9B,GAAyCF,IAAI,CAACK,cAAc,CAACH,GAAhB,CAA7C,GAAoEG,cAAc,CAACH,GADrF;AAEHC,IAAAA,IAAI,EAAE,OAAOE,cAAc,CAACF,IAAtB,KAA+B,QAA/B,GAA0CH,IAAI,CAACK,cAAc,CAACF,IAAhB,CAA9C,GAAsEE,cAAc,CAACF;AAFxF,GAAP;AAIH,CALD;;AAOA,IAAMG,0BAA0B,GAAG,SAA7BA,0BAA6B,CAACC,EAAD,EAAqB;AACpDA,EAAAA,EAAE,GAAGA,EAAE,CAACC,aAAR;;AACA,SAAOD,EAAE,CAACC,aAAV,EAAyB;AACrB,QAAIC,MAAM,CAACC,gBAAP,CAAwBH,EAAxB,EAA4BI,QAA5B,KAAyC,QAA7C,EAAuD;AACnD,aAAOJ,EAAP;AACH;;AAEDA,IAAAA,EAAE,GAAGA,EAAE,CAACC,aAAR;AACH;;AAED,SAAOD,EAAP;AACH,CAXD;;AAaA,IAAMK,sBAAsB,GAAG,SAAzBA,sBAAyB,CAC3BC,cAD2B,EAE3BC,iBAF2B,EAG3BT,cAH2B,EAIL;AACtB,MAAMU,KAA0B,GAAG,EAAnC;;AAEA,UAAQF,cAAc,CAACG,QAAvB;AACI,SAAK,QAAL;AACID,MAAAA,KAAK,CAACb,GAAN,yBAA2BG,cAAc,CAACH,GAA1C;AACA;;AACJ,SAAK,QAAL;AACIa,MAAAA,KAAK,CAACb,GAAN,wBAA0BG,cAAc,CAACH,GAAzC;AACA;;AACJ,SAAK,KAAL;AACIa,MAAAA,KAAK,CAACb,GAAN,GAAYG,cAAc,CAACH,GAA3B;AACA;;AACJ,YAVJ,CAWQ;;AAXR;;AAcA,UAAQW,cAAc,CAACI,UAAvB;AACI,SAAK,MAAL;AACIF,MAAAA,KAAK,CAACZ,IAAN,GAAaE,cAAc,CAACF,IAA5B;AACA;;AACJ,SAAK,QAAL;AACIY,MAAAA,KAAK,CAACZ,IAAN,wBAA2BE,cAAc,CAACF,IAA1C;AACA;;AACJ,SAAK,OAAL;AACIY,MAAAA,KAAK,CAACZ,IAAN,yBAA4BE,cAAc,CAACF,IAA3C;AACA;;AACJ,YAVJ,CAWQ;;AAXR;;AAcA,MAAIW,iBAAiB,CAACE,QAAlB,KAA+B,QAAnC,EAA6C;AACzCD,IAAAA,KAAK,CAACG,SAAN,GAAkB,mBAAlB;AACH;;AAED,MAAIJ,iBAAiB,CAACG,UAAlB,KAAiC,OAArC,EAA8C;AAC1CF,IAAAA,KAAK,CAACG,SAAN,GAAkBH,KAAK,CAACG,SAAN,IAAmB,EAArC;AACAH,IAAAA,KAAK,CAACG,SAAN,IAAmB,mBAAnB;AACH;;AAED,SAAOH,KAAP;AACH,CA7CD;;AA+CA,IAAMI,mBAAmB,GAAG,SAAtBA,mBAAsB,CACxBC,OADwB,EAExBP,cAFwB,EAGxBC,iBAHwB,EAIxBT,cAJwB,EAKH;AAAA;;AACrB,MAAMgB,aAAa,GAAGD,OAAH,aAAGA,OAAH,2CAAGA,OAAO,CAAEE,OAAZ,qDAAG,iBAAkBC,qBAAlB,EAAtB;AACA,MAAMC,2BAA2B,GAAGlB,0BAA0B,CAACc,OAAD,aAACA,OAAD,uBAACA,OAAO,CAAEE,OAAV,CAA1B,CAA6CC,qBAA7C,EAApC;AACA,MAAIE,aAAa,GAAGb,sBAAsB,CAACC,cAAD,EAAiBC,iBAAjB,EAAoCT,cAApC,CAA1C;;AAEA,MACIoB,aAAa,CAACtB,IAAd,IACCqB,2BAA2B,CAACrB,IAA5B,GAAmCE,cAAc,CAACF,IAAlD,GAAyDkB,aAAa,CAACK,KAAxE,GAAiFjB,MAAM,CAACkB,QAAP,CAAgBC,IAAhB,CAAqBC,WADtG,IAEAhB,cAAc,CAACI,UAAf,KAA8B,OAHlC,EAIE;AACEQ,IAAAA,aAAa,GAAGb,sBAAsB,iCAC9BC,cAD8B;AACdI,MAAAA,UAAU,EAAE;AADE,wCAE9BH,iBAF8B;AAEXG,MAAAA,UAAU,EAAE;AAFD,QAGlCZ,cAHkC,CAAtC;AAKH;;AAED,MACIoB,aAAa,CAACvB,GAAd,IACCsB,2BAA2B,CAACtB,GAA5B,GAAkCsB,2BAA2B,CAACM,MAA9D,GAAuEzB,cAAc,CAACH,GAAtF,GAA4FmB,aAAa,CAACS,MAA3G,GACIrB,MAAM,CAACkB,QAAP,CAAgBC,IAAhB,CAAqBG,YAFzB,IAGAlB,cAAc,CAACG,QAAf,KAA4B,QAJhC,EAKE;AACES,IAAAA,aAAa,GAAGb,sBAAsB,iCAC9BC,cAD8B;AACdG,MAAAA,QAAQ,EAAE;AADI,wCAE9BF,iBAF8B;AAEXE,MAAAA,QAAQ,EAAE;AAFC,QAGlCX,cAHkC,CAAtC;AAKH;;AAED,yCACOoB,aADP;AAEId,IAAAA,QAAQ,EAAE;AAFd;AAIH,CAvCD;;AAyCA,IAAMqB,uBAAuB,GAAG,SAA1BA,uBAA0B,CAC5BC,gBAD4B,EAE5BpB,cAF4B,EAG5BC,iBAH4B,EAI5BT,cAJ4B,EAK3B;AACD,MAAM6B,iBAAiB,GAAGD,gBAAgB,CAACV,qBAAjB,EAA1B;AACA,MAAMY,KAAe,GAAG,EAAxB;;AAEA,UAAQtB,cAAc,CAACG,QAAvB;AACI,SAAK,KAAL;AACImB,MAAAA,KAAK,CAACjC,GAAN,GAAYgC,iBAAiB,CAAChC,GAA9B;AACA;;AACJ,SAAK,QAAL;AACIiC,MAAAA,KAAK,CAACjC,GAAN,GAAYgC,iBAAiB,CAAChC,GAAlB,GAAyBgC,iBAAiB,CAACJ,MAAlB,GAA2B,CAAhE;AACA;;AACJ,SAAK,QAAL;AACIK,MAAAA,KAAK,CAACjC,GAAN,GAAYgC,iBAAiB,CAACE,MAA9B;AACA;;AACJ,YAVJ,CAWQ;;AAXR;;AAcA,UAAQvB,cAAc,CAACI,UAAvB;AACI,SAAK,MAAL;AACIkB,MAAAA,KAAK,CAAChC,IAAN,GAAa+B,iBAAiB,CAAC/B,IAA/B;AACA;;AACJ,SAAK,QAAL;AACIgC,MAAAA,KAAK,CAAChC,IAAN,GAAa+B,iBAAiB,CAAC/B,IAAlB,GAA0B+B,iBAAiB,CAACR,KAAlB,GAA0B,CAAjE;AACA;;AACJ,SAAK,OAAL;AACIS,MAAAA,KAAK,CAAChC,IAAN,GAAa+B,iBAAiB,CAACG,KAA/B;AACA;;AACJ,YAVJ,CAWY;;AAXZ;;AAcA,MAAMZ,aAAa,GAAGrB,WAAW,CAACC,cAAD,CAAjC;;AAEA,MAAI,CAACS,iBAAD,IAAsBA,iBAAiB,CAACE,QAAlB,KAA+B,KAAzD,EAAgE;AAC5DS,IAAAA,aAAa,CAACvB,GAAd,IAAqBiC,KAAK,CAACjC,GAA3B;AACH,GAFD,MAEO,IAAIY,iBAAiB,CAACE,QAAlB,KAA+B,QAAnC,EAA6C;AAChDS,IAAAA,aAAa,CAACW,MAAd,GAAuB3B,MAAM,CAACkB,QAAP,CAAgBC,IAAhB,CAAqBG,YAArB,GAAoCI,KAAK,CAACjC,GAA1C,GAAgDuB,aAAa,CAACvB,GAArF;AACA,WAAOuB,aAAa,CAACvB,GAArB;AACH;;AAED,MAAI,CAACY,iBAAD,IAAsBA,iBAAiB,CAACG,UAAlB,KAAiC,MAA3D,EAAmE;AAC/DQ,IAAAA,aAAa,CAACtB,IAAd,IAAsBgC,KAAK,CAAChC,IAA5B;AACH,GAFD,MAEO,IAAIW,iBAAiB,CAACG,UAAlB,KAAiC,OAArC,EAA8C;AACjDQ,IAAAA,aAAa,CAACY,KAAd,GAAsB5B,MAAM,CAACkB,QAAP,CAAgBC,IAAhB,CAAqBC,WAArB,GAAmCM,KAAK,CAAChC,IAAzC,GAAgDsB,aAAa,CAACtB,IAApF;AACA,WAAOsB,aAAa,CAACtB,IAArB;AACH,GA9CA,CAgDD;;;AACA,MAAImC,sBAAsB,CAACL,gBAAD,CAA1B,EAA8C;AAC1C,WAAOR,aAAa,CAACtB,IAArB;AACH;;AAED,SAAOsB,aAAP;AACH,CA3DD;;AA6DA,IAAMc,gBAAgB,GAAG,SAAnBA,gBAAmB,CACrBnB,OADqB,EAErBoB,QAFqB,EAGrB3B,cAHqB,EAIrBC,iBAJqB,EAKrBT,cALqB,EAMA;AAAA;;AACrB,MAAMgB,aAAa,GAAGD,OAAH,aAAGA,OAAH,4CAAGA,OAAO,CAAEE,OAAZ,sDAAG,kBAAkBC,qBAAlB,EAAtB;AACA,MAAMU,gBAAgB,GAAGO,QAAQ,IAAIA,QAAQ,CAAClB,OAArB,GAA+BkB,QAAQ,CAAClB,OAAxC,GAAkDkB,QAA3E;AAEA,MAAIf,aAAJ;;AACA,MAAIQ,gBAAJ,EAAsB;AAClBR,IAAAA,aAAa,GAAGO,uBAAuB,CACnCC,gBADmC,EAEnCpB,cAFmC,EAGnCC,iBAHmC,EAInCT,cAJmC,CAAvC;;AAMA,QACIoB,aAAa,CAACtB,IAAd,IACCsB,aAAa,CAACtB,IAAd,GAAqBkB,aAAa,CAACK,KAApC,GAA6CjB,MAAM,CAACkB,QAAP,CAAgBC,IAAhB,CAAqBC,WADlE,IAEAhB,cAAc,CAACI,UAAf,KAA8B,OAHlC,EAIE;AACEQ,MAAAA,aAAa,GAAGO,uBAAuB,CACnCC,gBADmC,kCAE/BpB,cAF+B;AAEfI,QAAAA,UAAU,EAAE;AAFG,0CAG/BH,iBAH+B;AAGZG,QAAAA,UAAU,EAAE;AAHA,UAInCZ,cAJmC,CAAvC;AAMH;;AAED,QACIoB,aAAa,CAACvB,GAAd,IACCuB,aAAa,CAACvB,GAAd,GAAoBmB,aAAa,CAACS,MAAnC,GAA6CrB,MAAM,CAACkB,QAAP,CAAgBC,IAAhB,CAAqBG,YADlE,IAEAlB,cAAc,CAACG,QAAf,KAA4B,QAHhC,EAIE;AACES,MAAAA,aAAa,GAAGO,uBAAuB,CACnCC,gBADmC,kCAE/BpB,cAF+B;AAEfG,QAAAA,QAAQ,EAAE;AAFK,0CAG/BF,iBAH+B;AAGZE,QAAAA,QAAQ,EAAE;AAHE,UAInCX,cAJmC,CAAvC;AAMH;AACJ,GAhCD,MAgCO;AACHoB,IAAAA,aAAa,GAAGrB,WAAW,CAACC,cAAD,CAA3B;AACH;;AAED,MAAIoB,aAAa,CAACtB,IAAd,IAAuBsB,aAAa,CAACtB,IAAd,GAAqBkB,aAAa,CAACK,KAApC,GAA6CjB,MAAM,CAACkB,QAAP,CAAgBC,IAAhB,CAAqBC,WAA5F,EAAyG;AACrGJ,IAAAA,aAAa,CAACtB,IAAd,GAAqBM,MAAM,CAACkB,QAAP,CAAgBC,IAAhB,CAAqBC,WAArB,GAAmCR,aAAa,CAACK,KAAtE;AACH;;AAED,MAAID,aAAa,CAACvB,GAAd,IAAsBuB,aAAa,CAACvB,GAAd,GAAoBmB,aAAa,CAACS,MAAnC,GAA6CrB,MAAM,CAACkB,QAAP,CAAgBC,IAAhB,CAAqBG,YAA3F,EAAyG;AACrGN,IAAAA,aAAa,CAACvB,GAAd,GAAoBO,MAAM,CAACkB,QAAP,CAAgBC,IAAhB,CAAqBG,YAArB,GAAoCV,aAAa,CAACS,MAAtE;AACH;;AAED,yCACOL,aADP;AAEId,IAAAA,QAAQ,EAAE;AAFd;AAIH,CA3DD;;AA6DA,IAAM8B,YAAY,GAAG,SAAfA,YAAe,CAACR,gBAAD,EAAsC;AACvD,MAAIK,sBAAsB,CAAEL,gBAAF,CAA1B,EAAgD;AAC5C,QAAMf,SAAS,GAAIe,gBAAgB,CAACS,OAAjB,CAAyB,sBAAzB,CAAD,CAAkE3B,KAAlE,CAAwEG,SAA1F;AAEA,WAAO,EAAEA,SAAS,KAAK,qBAAd,IAAuCA,SAAS,KAAK,gBAAvD,CAAP;AACH;;AAED,SAAO,KAAP;AACH,CARD;;AAUA,IAAMoB,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACL,gBAAD,EAAsC;AACjE,SAAQA,gBAAgB,IACpBA,gBAAgB,CAACS,OADb,IAEJT,gBAAgB,CAACS,OAAjB,CAAyB,sBAAzB,CAFJ;AAGH,CAJD;;AAMA,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAC1BC,WAD0B,EAE1BvC,cAF0B,EAG1BmC,QAH0B,EAI1B3B,cAJ0B,EAK1BC,iBAL0B,EAM1BH,QAN0B,EAOsC;AAChE,kBAA0CZ,QAAQ,CAAsBE,eAAtB,CAAlD;AAAA;AAAA,MAAOwB,aAAP;AAAA,MAAsBoB,gBAAtB;;AACA,MAAMzB,OAAO,GAAGtB,MAAM,CAAC,IAAD,CAAtB;AAEAD,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAI+C,WAAJ,EAAiB;AACb,UAAMX,gBAAgB,GAAIO,QAAQ,IAAIA,QAAQ,CAAClB,OAArB,GAA+BkB,QAAQ,CAAClB,OAAxC,GAAkDkB,QAA5E;;AACA,UAAMM,cAAc,GAAInC,QAAQ,KAAK,UAAb,IAA2B8B,YAAY,CAACR,gBAAD,CAAxC,GACnBd,mBAAmB,CAACC,OAAD,EAAUP,cAAV,EAA0BC,iBAA1B,EAA6CT,cAA7C,CADA,GAEnBkC,gBAAgB,CAACnB,OAAD,EAAUoB,QAAV,EAAoB3B,cAApB,EAAoCC,iBAApC,EAAuDT,cAAvD,CAFpB;;AAGAwC,MAAAA,gBAAgB,CAACC,cAAD,CAAhB;AACH,KAND,MAMO;AACHD,MAAAA,gBAAgB,CAAC5C,eAAD,CAAhB;AACH;AACJ,GAVQ,EAUN,CACCuC,QADD,EAECnC,cAFD,EAGCQ,cAAc,CAACG,QAHhB,EAICH,cAAc,CAACI,UAJhB,EAKC2B,WALD,EAMCxB,OAND,EAOCP,cAPD,EAQCC,iBARD,EASCH,QATD,CAVM,CAAT;AAsBA,SAAO,CAACc,aAAD,EAAgBL,OAAhB,CAAP;AACH,CAlCM","sourcesContent":["import {useEffect, useRef, useState} from 'react';\nimport toPX from 'to-px';\n\ntype Position = {\n    top?: number;\n    left?: number;\n    bottom?: number;\n    right?: number;\n}\ntype AnchorElOrigin = {\n    horizontal: 'left' | 'center' | 'right';\n    vertical: 'top' | 'center' | 'bottom';\n};\ntype TransformElOrigin = {\n    horizontal: 'left' | 'right';\n    vertical: 'top' | 'bottom';\n};\ntype PositioningType = 'absolute' | 'fixed';\n\nconst initialPosition: Position = {\n    top: -1000,\n    left: -1000\n};\n\nconst getPosition = (anchorPosition: Position): Position => {\n    return {\n        top: typeof anchorPosition.top === 'string' ? toPX(anchorPosition.top) : anchorPosition.top,\n        left: typeof anchorPosition.left === 'string' ? toPX(anchorPosition.left) : anchorPosition.left\n    };\n};\n\nconst getClosestRelativeAncestor = (el: HTMLElement) => {\n    el = el.parentElement;\n    while (el.parentElement) {\n        if (window.getComputedStyle(el).position !== 'static') {\n            return el;\n        }\n\n        el = el.parentElement;\n    }\n\n    return el;\n};\n\nconst getAbsolutePositionCSS = (\n    anchorElOrigin: AnchorElOrigin,\n    transformElOrigin: TransformElOrigin,\n    anchorPosition: Position\n): React.CSSProperties => {\n    const style: React.CSSProperties = {};\n\n    switch (anchorElOrigin.vertical) {\n        case 'bottom':\n            style.top = `calc(100% + ${anchorPosition.top}px)`;\n            break;\n        case 'center':\n            style.top = `calc(50% + ${anchorPosition.top}px)`;\n            break;\n        case 'top':\n            style.top = anchorPosition.top;\n            break;\n        default:\n            // For linter\n    }\n\n    switch (anchorElOrigin.horizontal) {\n        case 'left':\n            style.left = anchorPosition.left;\n            break;\n        case 'center':\n            style.left = `calc(50% + ${anchorPosition.left}px)`;\n            break;\n        case 'right':\n            style.left = `calc(100% + ${anchorPosition.left}px)`;\n            break;\n        default:\n            // For linter\n    }\n\n    if (transformElOrigin.vertical === 'bottom') {\n        style.transform = 'translateY(-100%)';\n    }\n\n    if (transformElOrigin.horizontal === 'right') {\n        style.transform = style.transform || '';\n        style.transform += 'translateX(-100%)';\n    }\n\n    return style;\n};\n\nconst getAbsolutePosition = (\n    itemRef: React.MutableRefObject<HTMLElement>,\n    anchorElOrigin: AnchorElOrigin,\n    transformElOrigin: TransformElOrigin,\n    anchorPosition: Position\n):React.CSSProperties => {\n    const menuRectangle = itemRef?.current?.getBoundingClientRect();\n    const closestRelativeAncestorRect = getClosestRelativeAncestor(itemRef?.current).getBoundingClientRect();\n    let stylePosition = getAbsolutePositionCSS(anchorElOrigin, transformElOrigin, anchorPosition);\n\n    if (\n        stylePosition.left &&\n        (closestRelativeAncestorRect.left + anchorPosition.left + menuRectangle.width) > window.document.body.clientWidth &&\n        anchorElOrigin.horizontal === 'right'\n    ) {\n        stylePosition = getAbsolutePositionCSS(\n            {...anchorElOrigin, horizontal: 'left'},\n            {...transformElOrigin, horizontal: 'right'},\n            anchorPosition\n        );\n    }\n\n    if (\n        stylePosition.top &&\n        (closestRelativeAncestorRect.top + closestRelativeAncestorRect.height + anchorPosition.top + menuRectangle.height) >\n            window.document.body.clientHeight &&\n        anchorElOrigin.vertical === 'bottom'\n    ) {\n        stylePosition = getAbsolutePositionCSS(\n            {...anchorElOrigin, vertical: 'top'},\n            {...transformElOrigin, vertical: 'bottom'},\n            anchorPosition\n        );\n    }\n\n    return {\n        ...stylePosition,\n        position: 'absolute'\n    };\n};\n\nconst getPositionRelativeToEl = (\n    resolvedAnchorEl: HTMLDivElement,\n    anchorElOrigin: AnchorElOrigin,\n    transformElOrigin: TransformElOrigin,\n    anchorPosition: Position\n) => {\n    const anchorElRectangle = resolvedAnchorEl.getBoundingClientRect();\n    const point: Position = {};\n\n    switch (anchorElOrigin.vertical) {\n        case 'top':\n            point.top = anchorElRectangle.top;\n            break;\n        case 'center':\n            point.top = anchorElRectangle.top + (anchorElRectangle.height / 2);\n            break;\n        case 'bottom':\n            point.top = anchorElRectangle.bottom;\n            break;\n        default:\n            // For linter\n    }\n\n    switch (anchorElOrigin.horizontal) {\n        case 'left':\n            point.left = anchorElRectangle.left;\n            break;\n        case 'center':\n            point.left = anchorElRectangle.left + (anchorElRectangle.width / 2);\n            break;\n        case 'right':\n            point.left = anchorElRectangle.right;\n            break;\n        default:\n                // For linter\n    }\n\n    const stylePosition = getPosition(anchorPosition);\n\n    if (!transformElOrigin || transformElOrigin.vertical === 'top') {\n        stylePosition.top += point.top;\n    } else if (transformElOrigin.vertical === 'bottom') {\n        stylePosition.bottom = window.document.body.clientHeight - point.top - stylePosition.top;\n        delete stylePosition.top;\n    }\n\n    if (!transformElOrigin || transformElOrigin.horizontal === 'left') {\n        stylePosition.left += point.left;\n    } else if (transformElOrigin.horizontal === 'right') {\n        stylePosition.right = window.document.body.clientWidth - point.left - stylePosition.left;\n        delete stylePosition.left;\n    }\n\n    // In case of fixed positioning within a transformed parent we need to remove left as it is relative\n    if (hasParentWithTransform(resolvedAnchorEl)) {\n        delete stylePosition.left;\n    }\n\n    return stylePosition;\n};\n\nconst getFixedPosition = (\n    itemRef: React.MutableRefObject<HTMLElement>,\n    anchorEl: React.MutableRefObject<HTMLElement>,\n    anchorElOrigin: AnchorElOrigin,\n    transformElOrigin: TransformElOrigin,\n    anchorPosition: Position\n):React.CSSProperties => {\n    const menuRectangle = itemRef?.current?.getBoundingClientRect();\n    const resolvedAnchorEl = anchorEl && anchorEl.current ? anchorEl.current : anchorEl;\n\n    let stylePosition;\n    if (resolvedAnchorEl) {\n        stylePosition = getPositionRelativeToEl(\n            resolvedAnchorEl as HTMLDivElement,\n            anchorElOrigin,\n            transformElOrigin,\n            anchorPosition\n        );\n        if (\n            stylePosition.left &&\n            (stylePosition.left + menuRectangle.width) > window.document.body.clientWidth &&\n            anchorElOrigin.horizontal === 'right'\n        ) {\n            stylePosition = getPositionRelativeToEl(\n                resolvedAnchorEl as HTMLDivElement,\n                {...anchorElOrigin, horizontal: 'left'},\n                {...transformElOrigin, horizontal: 'right'},\n                anchorPosition\n            );\n        }\n\n        if (\n            stylePosition.top &&\n            (stylePosition.top + menuRectangle.height) > window.document.body.clientHeight &&\n            anchorElOrigin.vertical === 'bottom'\n        ) {\n            stylePosition = getPositionRelativeToEl(\n                resolvedAnchorEl as HTMLDivElement,\n                {...anchorElOrigin, vertical: 'top'},\n                {...transformElOrigin, vertical: 'bottom'},\n                anchorPosition\n            );\n        }\n    } else {\n        stylePosition = getPosition(anchorPosition);\n    }\n\n    if (stylePosition.left && (stylePosition.left + menuRectangle.width) > window.document.body.clientWidth) {\n        stylePosition.left = window.document.body.clientWidth - menuRectangle.width;\n    }\n\n    if (stylePosition.top && (stylePosition.top + menuRectangle.height) > window.document.body.clientHeight) {\n        stylePosition.top = window.document.body.clientHeight - menuRectangle.height;\n    }\n\n    return {\n        ...stylePosition,\n        position: 'fixed'\n    };\n};\n\nconst hasTransform = (resolvedAnchorEl: HTMLDivElement) => {\n    if (hasParentWithTransform((resolvedAnchorEl))) {\n        const transform = (resolvedAnchorEl.closest('[style*=\"transform\"]') as HTMLElement).style.transform;\n\n        return !(transform === 'translate(0px, 0px)' || transform === 'translate(0px)');\n    }\n\n    return false;\n};\n\nconst hasParentWithTransform = (resolvedAnchorEl: HTMLDivElement) => {\n    return (resolvedAnchorEl &&\n        resolvedAnchorEl.closest &&\n        resolvedAnchorEl.closest('[style*=\"transform\"]'));\n};\n\nexport const usePositioning = (\n    isDisplayed: boolean,\n    anchorPosition: Position,\n    anchorEl: React.MutableRefObject<HTMLElement>,\n    anchorElOrigin: AnchorElOrigin,\n    transformElOrigin: TransformElOrigin,\n    position: PositioningType\n): [React.CSSProperties, React.MutableRefObject<HTMLDivElement>] => {\n    const [stylePosition, setStylePosition] = useState<React.CSSProperties>(initialPosition as React.CSSProperties);\n    const itemRef = useRef(null);\n\n    useEffect(() => {\n        if (isDisplayed) {\n            const resolvedAnchorEl = (anchorEl && anchorEl.current ? anchorEl.current : anchorEl) as HTMLDivElement;\n            const _stylePosition = (position === 'absolute' || hasTransform(resolvedAnchorEl)) ?\n                getAbsolutePosition(itemRef, anchorElOrigin, transformElOrigin, anchorPosition) :\n                getFixedPosition(itemRef, anchorEl, anchorElOrigin, transformElOrigin, anchorPosition);\n            setStylePosition(_stylePosition);\n        } else {\n            setStylePosition(initialPosition);\n        }\n    }, [\n        anchorEl,\n        anchorPosition,\n        anchorElOrigin.vertical,\n        anchorElOrigin.horizontal,\n        isDisplayed,\n        itemRef,\n        anchorElOrigin,\n        transformElOrigin,\n        position\n    ]);\n\n    return [stylePosition, itemRef];\n};\n"]}