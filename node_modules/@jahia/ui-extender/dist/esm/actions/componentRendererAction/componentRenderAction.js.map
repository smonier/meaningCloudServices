{"version":3,"names":["React","useContext","useEffect","PropTypes","ComponentRendererContext","ComponentRendererActionComponent","_ref","Render","render","componentToRender","otherProps","_objectWithoutProperties","_excluded","componentRenderer","componentContext","id","component","properties","_objectSpread","onExited","handleDestroy","destroy","setProperties","onClick","createElement","_extends","propTypes","func","isRequired","string","context","object","node","componentRendererAction"],"sources":["componentRenderAction.tsx"],"sourcesContent":["import React, {useContext, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport {ComponentRendererContext} from '~/ComponentRenderer';\n\ntype RenderProps = {\n    id: string,\n\n    onClick: () => void\n}\n\ntype BaseProps = {\n    onExited: () => void\n}\n\nexport type ComponentRendererActionComponentProps<Type extends BaseProps> = {\n    render: React.FunctionComponent<Partial<RenderProps>>,\n\n    componentToRender: React.FunctionComponent<Type>,\n} & RenderProps;\n\nexport const ComponentRendererActionComponent = <Type extends BaseProps, >({render: Render, componentToRender, ...otherProps}: ComponentRendererActionComponentProps<Type>) => {\n    const componentRenderer = useContext(ComponentRendererContext);\n\n    const componentContext: {\n        id?: string,\n        render?: (component: React.FunctionComponent<Type>, props?: React.PropsWithChildren<Type>) => void,\n        handleDestroy?: () => void,\n        setProperties?: (props: React.PropsWithChildren<Type>) => void\n    } = {};\n\n    useEffect(() => {\n        componentContext.id = 'actionComponent-' + otherProps.id;\n        componentContext.render = (component, properties) => {\n            componentRenderer.render(componentContext.id, component, {...otherProps, onExited: componentContext.handleDestroy, ...properties});\n        };\n\n        componentContext.handleDestroy = () => {\n            componentRenderer.destroy(componentContext.id);\n        };\n\n        componentContext.setProperties = properties => {\n            componentRenderer.setProperties(componentContext.id, properties);\n        };\n    });\n\n    if (!otherProps.onClick) {\n        return (\n            <Render\n                onClick={() => componentContext.render(componentToRender)}\n                {...otherProps}\n            />\n        );\n    }\n\n    return <Render {...otherProps}/>;\n};\n\nComponentRendererActionComponent.propTypes = {\n    context: PropTypes.object.isRequired,\n    render: PropTypes.func.isRequired,\n    componentToRender: PropTypes.node\n};\n\n/**\n * Context properties :\n *\n * menu : name of the target of actions to display in the menu\n * menuRenderer\n * menuItemRenderer\n */\nexport const componentRendererAction = {\n    component: ComponentRendererActionComponent\n};\n\n"],"mappings":";;;;;;AAAA,OAAOA,KAAK,IAAGC,UAAU,EAAEC,SAAS,QAAO,OAAO;AAClD,OAAOC,SAAS,MAAM,YAAY;AAClC,SAAQC,wBAAwB;AAkBhC,OAAO,IAAMC,gCAAgC,GAAG,SAAnCA,gCAAgCA,CAAAC,IAAA,EAAkI;EAAA,IAA3FC,MAAM,GAAAD,IAAA,CAAdE,MAAM;IAAUC,iBAAiB,GAAAH,IAAA,CAAjBG,iBAAiB;IAAKC,UAAU,GAAAC,wBAAA,CAAAL,IAAA,EAAAM,SAAA;EACxH,IAAMC,iBAAiB,GAAGZ,UAAU,CAACG,wBAAwB,CAAC;EAE9D,IAAMU,gBAKL,GAAG,CAAC,CAAC;EAENZ,SAAS,CAAC,YAAM;IACZY,gBAAgB,CAACC,EAAE,GAAG,kBAAkB,GAAGL,UAAU,CAACK,EAAE;IACxDD,gBAAgB,CAACN,MAAM,GAAG,UAACQ,SAAS,EAAEC,UAAU,EAAK;MACjDJ,iBAAiB,CAACL,MAAM,CAACM,gBAAgB,CAACC,EAAE,EAAEC,SAAS,EAAAE,aAAA,CAAAA,aAAA,KAAMR,UAAU;QAAES,QAAQ,EAAEL,gBAAgB,CAACM;MAAa,GAAKH,UAAU,CAAC,CAAC;IACtI,CAAC;IAEDH,gBAAgB,CAACM,aAAa,GAAG,YAAM;MACnCP,iBAAiB,CAACQ,OAAO,CAACP,gBAAgB,CAACC,EAAE,CAAC;IAClD,CAAC;IAEDD,gBAAgB,CAACQ,aAAa,GAAG,UAAAL,UAAU,EAAI;MAC3CJ,iBAAiB,CAACS,aAAa,CAACR,gBAAgB,CAACC,EAAE,EAAEE,UAAU,CAAC;IACpE,CAAC;EACL,CAAC,CAAC;EAEF,IAAI,CAACP,UAAU,CAACa,OAAO,EAAE;IACrB,oBACIvB,KAAA,CAAAwB,aAAA,CAACjB,MAAM,EAAAkB,QAAA;MACHF,OAAO,EAAE,SAAAA,QAAA;QAAA,OAAMT,gBAAgB,CAACN,MAAM,CAACC,iBAAiB,CAAC;MAAA;IAAC,GACtDC,UAAU,CACjB,CAAC;EAEV;EAEA,oBAAOV,KAAA,CAAAwB,aAAA,CAACjB,MAAM,EAAKG,UAAY,CAAC;AACpC,CAAC;AAEDL,gCAAgC,CAACqB,SAAS,GAAG;EAlDzCH,OAAO,EAAApB,SAAA,CAAAwB,IAAA,CAAAC,UAAA;EAFPb,EAAE,EAAAZ,SAAA,CAAA0B,MAAA,CAAAD,UAAA;EAqDFE,OAAO,EAAE3B,SAAS,CAAC4B,MAAM,CAACH,UAAU;EACpCpB,MAAM,EAAEL,SAAS,CAACwB,IAAI,CAACC,UAAU;EACjCnB,iBAAiB,EAAEN,SAAS,CAAC6B;AACjC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAMC,uBAAuB,GAAG;EACnCjB,SAAS,EAAEX;AACf,CAAC"}