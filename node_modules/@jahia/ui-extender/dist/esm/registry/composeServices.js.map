{"version":3,"names":["composeServices","_len","arguments","length","services","Array","_key","reduce","acc","service","Object","entries","forEach","_ref","_ref2","_slicedToArray","key","value","previous","_len2","params","_key2","apply","concat","isArray","_toConsumableArray"],"sources":["composeServices.ts"],"sourcesContent":["import {Service} from './service';\n\nfunction composeServices(...services: Partial<Service>[]): Partial<Service> {\n    return services.reduce((acc, service) => {\n        if (service) {\n            Object.entries(service).forEach(([key, value]) => {\n                const previous = acc[key];\n                if (typeof previous === 'function' && typeof value === 'function') {\n                    // If function, override the function but pass the previous one as the last parameter\n                    // Do not convert the following function to a lambda otherwise the arguments will not be coming from the right context\n                    acc[key] = function (...params: unknown[]) {\n                        return value.apply(this, [...params, previous]);\n                    };\n                } else if (Array.isArray(previous) && Array.isArray(value)) {\n                    // Concatenate arrays\n                    acc[key] = [...previous, ...value];\n                } else {\n                    // Simply replaces the value\n                    acc[key] = value;\n                }\n            });\n        }\n\n        return acc;\n    }, {});\n}\n\nexport {composeServices};\n"],"mappings":";;AAEA,SAASA,eAAeA,CAAA,EAAoD;EAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAAhDC,QAAQ,OAAAC,KAAA,CAAAJ,IAAA,GAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;IAARF,QAAQ,CAAAE,IAAA,IAAAJ,SAAA,CAAAI,IAAA;EAAA;EAChC,OAAOF,QAAQ,CAACG,MAAM,CAAC,UAACC,GAAG,EAAEC,OAAO,EAAK;IACrC,IAAIA,OAAO,EAAE;MACTC,MAAM,CAACC,OAAO,CAACF,OAAO,CAAC,CAACG,OAAO,CAAC,UAAAC,IAAA,EAAkB;QAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,IAAA;UAAhBG,GAAG,GAAAF,KAAA;UAAEG,KAAK,GAAAH,KAAA;QACxC,IAAMI,QAAQ,GAAGV,GAAG,CAACQ,GAAG,CAAC;QACzB,IAAI,OAAOE,QAAQ,KAAK,UAAU,IAAI,OAAOD,KAAK,KAAK,UAAU,EAAE;UAC/D;UACA;UACAT,GAAG,CAACQ,GAAG,CAAC,GAAG,YAAgC;YAAA,SAAAG,KAAA,GAAAjB,SAAA,CAAAC,MAAA,EAAnBiB,MAAM,OAAAf,KAAA,CAAAc,KAAA,GAAAE,KAAA,MAAAA,KAAA,GAAAF,KAAA,EAAAE,KAAA;cAAND,MAAM,CAAAC,KAAA,IAAAnB,SAAA,CAAAmB,KAAA;YAAA;YAC1B,OAAOJ,KAAK,CAACK,KAAK,CAAC,IAAI,KAAAC,MAAA,CAAMH,MAAM,GAAEF,QAAQ,EAAC,CAAC;UACnD,CAAC;QACL,CAAC,MAAM,IAAIb,KAAK,CAACmB,OAAO,CAACN,QAAQ,CAAC,IAAIb,KAAK,CAACmB,OAAO,CAACP,KAAK,CAAC,EAAE;UACxD;UACAT,GAAG,CAACQ,GAAG,CAAC,MAAAO,MAAA,CAAAE,kBAAA,CAAOP,QAAQ,GAAAO,kBAAA,CAAKR,KAAK,EAAC;QACtC,CAAC,MAAM;UACH;UACAT,GAAG,CAACQ,GAAG,CAAC,GAAGC,KAAK;QACpB;MACJ,CAAC,CAAC;IACN;IAEA,OAAOT,GAAG;EACd,CAAC,EAAE,CAAC,CAAC,CAAC;AACV;AAEA,SAAQR,eAAe"}