{"version":3,"names":["_registry","require","describe","beforeEach","registry","clear","it","comp","add","foo","expect","key","toBe","get","toThrow","Error","addOrReplace","not","toBeUndefined","res","find","type","length","test1","targets","test2","test3","target","toEqual","id","priority","item1","item2","remove","item3"],"sources":["registry.spec.js"],"sourcesContent":["import {registry} from './registry';\n\ndescribe('registry', () => {\n    beforeEach(() => {\n        registry.clear();\n    });\n\n    it('should set key', () => {\n        const comp = registry.add('comp', 'test', {foo: 'bar'});\n        expect(comp.key).toBe('test');\n    });\n\n    it('should register component', () => {\n        const comp = registry.add('comp', 'test', {foo: 'bar'});\n        expect(registry.get('comp', 'test')).toBe(comp);\n    });\n\n    it('should not allow double registration', () => {\n        registry.add('comp', 'test', {foo: 'bar'});\n        expect(() => registry.add('comp', 'test', {foo: 'bar'})).toThrow(Error);\n    });\n\n    it('should allow double registration with addOrReplace', () => {\n        registry.add('comp', 'test', {foo: 'bar'});\n        expect(() => registry.addOrReplace('comp', 'test', {foo: 'bar'})).not.toThrow(Error);\n    });\n\n    it('should clear', () => {\n        registry.add('comp', 'test', {foo: 'bar'});\n        registry.clear();\n        expect(registry.get('comp', 'test')).toBeUndefined();\n    });\n\n    it('should find things based on filter', () => {\n        registry.add('comp', 'test1', {foo: 'bar'});\n        registry.add('comp', 'test2', {foo: 'bar'});\n        registry.add('not-a-comp', 'test3', {foo: 'bar'});\n        registry.add('comp', 'test3', {foo: 'not-bar'});\n        const res = registry.find({type: 'comp', foo: 'bar'});\n        expect(res.length).toBe(2);\n    });\n\n    it('should find things based on target filter', () => {\n        const test1 = registry.add('comp', 'test1', {targets: ['bar']});\n        const test2 = registry.add('comp', 'test2', {targets: ['bar']});\n        const test3 = registry.add('comp', 'test3', {targets: ['bar']});\n        registry.add('comp', 'test4', {targets: ['not-bar']});\n\n        expect(registry.find({type: 'comp', target: 'bar'})).toEqual([test1, test2, test3]);\n    });\n\n    it('should find things based on target filter, sorted', () => {\n        const test1 = registry.add('comp', 'test1', {targets: ['bar:1']});\n        const test2 = registry.add('comp', 'test2', {targets: [{id: 'bar', priority: 3}]});\n        const test3 = registry.add('comp', 'test3', {targets: ['bar:2']});\n\n        const res = registry.find({type: 'comp', target: 'bar'});\n\n        expect(res).toEqual([test1, test3, test2]);\n    });\n\n    it('should remove the object for the given key / name pair', () => {\n        const item1 = registry.add('item-to-delete', 'item1', {targets: ['bar']});\n        const item2 = registry.add('item-to-delete', 'item2', {targets: ['bar']});\n        expect(registry.find({type: 'item-to-delete'})).toEqual([item1, item2]);\n\n        registry.remove('item-to-delete', 'item1');\n\n        expect(registry.find({type: 'item-to-delete'})).toEqual([item2]);\n    });\n\n    it('should remove the objects for the given key', () => {\n        const item1 = registry.add('item-to-delete', 'item1', {targets: ['bar']});\n        const item2 = registry.add('item-to-delete', 'item2', {targets: ['bar']});\n        const item3 = registry.add('item-to-not-delete', 'item3', {targets: ['bar']});\n        expect(registry.find({type: 'item-to-delete'})).toEqual([item1, item2]);\n\n        registry.remove('item-to-delete');\n\n        expect(registry.find({type: 'item-to-delete'})).toEqual([]);\n        expect(registry.find({type: 'item-to-not-delete'})).toEqual([item3]);\n    });\n});\n"],"mappings":"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"}