{"version":3,"names":["_react","_interopRequireWildcard","require","_reactDom","_interopRequireDefault","_core","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty2","getOwnPropertyDescriptors","defineProperties","ItemLoading","props","_props$context$props","context","id","parentMenuContext","MenuItemRenderer","menuItemRenderer","useEffect","dispatch","type","item","createElement","_extends2","onClick","propTypes","_propTypes","string","isRequired","shape","func","display","ItemRender","_props$context$props2","menuContext","menuState","rootMenuContext","isVisible","event","stopPropagation","onMouseEnter","isOpen","c","currentTarget","getBoundingClientRect","anchorEl","anchorElOrigin","vertical","horizontal","value","onMouseLeave","setTimeout","currentCtx","oneOfType","originalContext","anchor","any","anchorPosition","top","number","left","oneOf","transformElOrigin","isRendered","bool","isInMenu","isSubMenu","subMenuContext","loadingItems","arrayOf","loadedItems","Menu","menuTarget","menuFilter","isMenuPreload","MenuRenderer","menuRenderer","actionKey","menuItemProps","menuKey","isLoading","onClose","e","preventDefault","onExited","DisplayActions","buttonProps","loading","render","isMenuUseEventPosition","buttonIcon","element","add","items","indexOf","concat","_toConsumableArray2","remove","f","reducer","state","action","includes","MenuActionComponent","Render","Loading","visibilityPredicate","elRef","useRef","document","getElementById","current","setAttribute","body","appendChild","_useReducer","useReducer","Boolean","_useReducer2","_slicedToArray2","useMemo","Fragment","eventProps","boundingClientRect","targetMock","clientX","clientY","ReactDOM","createPortal","exports","menuAction","component"],"sources":["menuAction.tsx"],"sourcesContent":["import React, {Reducer, useEffect, useMemo, useReducer, useRef} from 'react';\nimport ReactDOM from 'react-dom';\nimport {DisplayActions} from '../core';\n\nexport declare type AnchorPosition = {\n    top: number;\n    left: number;\n};\nexport declare type AnchorElOrigin = {\n    horizontal: 'left' | 'center' | 'right';\n    vertical: 'top' | 'center' | 'bottom';\n};\nexport declare type TransformElOrigin = {\n    horizontal: 'left' | 'right';\n    vertical: 'top' | 'bottom';\n};\n\ntype Anchor = {\n    anchorEl?: unknown,\n    anchorPosition?: AnchorPosition,\n    anchorElOrigin?: AnchorElOrigin,\n    transformElOrigin?: TransformElOrigin,\n}\n\ntype MenuContext = {\n    id: string,\n\n    dispatch: (action: ActionType) => void\n\n    display: (currentCtx: object, anchor: Anchor) => void\n}\n\ntype ItemLoadingProps = {\n    id: string,\n\n    context?: object,\n\n    parentMenuContext?: MenuContext,\n\n    menuItemRenderer?: React.FunctionComponent<{ onClick: () => void }>\n}\n\nconst ItemLoading = (props: ItemLoadingProps) => {\n    const {id, parentMenuContext, menuItemRenderer: MenuItemRenderer} = {...props.context, ...props};\n\n    useEffect(() => {\n        parentMenuContext.dispatch({type: 'loading', item: id});\n    });\n\n    return (\n        <MenuItemRenderer\n            {...props}\n            onClick={() => {\n                //\n            }}\n        />\n    );\n};\n\ntype MenuItemRendererProps = {\n    onClick?: (event: React.MouseEvent) => void,\n    onMouseEnter?: (event: React.MouseEvent) => void,\n    onMouseLeave?: (event: React.MouseEvent) => void\n}\n\ntype ItemRenderProps = {\n    context?: object,\n    id: string,\n    menuItemRenderer?: React.FunctionComponent<MenuItemRendererProps>,\n    rootMenuContext?: MenuContext,\n    parentMenuContext?: MenuContext,\n    menuContext?: MenuContext\n    menuState?: MenuState,\n    onClick?: (props: ItemRenderProps, event: React.MouseEvent) => void,\n    isVisible?: boolean\n};\n\nconst ItemRender = (props: ItemRenderProps) => {\n    const {\n        id,\n        onClick,\n        menuContext,\n        menuState,\n        rootMenuContext,\n        parentMenuContext,\n        menuItemRenderer: MenuItemRenderer,\n        isVisible\n    } = {...props.context, ...props};\n    useEffect(() => {\n        parentMenuContext.dispatch({type: 'loaded', item: id, isVisible});\n    });\n\n    // Values for menuContext / menuState are set only if this item is a submenu item.\n\n    if (isVisible === false) {\n        return null;\n    }\n\n    return (\n        <MenuItemRenderer\n            {...props}\n            onClick={event => {\n                // Call the action and close the menu\n                if (onClick) {\n                    onClick(props, event);\n                    event.stopPropagation();\n                    rootMenuContext.dispatch({type: 'close'});\n                }\n            }}\n            onMouseEnter={event => {\n                if (menuContext) {\n                    // Open submenu (only if it's not opened already)\n                    if (menuState && !menuState.isOpen) {\n                        const c = event.currentTarget.getBoundingClientRect();\n                        menuContext.display(null, {\n                            anchorEl: {\n                                getBoundingClientRect: () => c\n                            },\n                            anchorElOrigin: {vertical: 'top', horizontal: 'right'}\n                        });\n                    }\n                } else {\n                    // Moved into another menu item (not sub menu), close current submenu if present\n                    parentMenuContext.dispatch({type: 'setSubMenuContext', value: null});\n                }\n            }}\n            onMouseLeave={() => {\n                // Check if the mouse moved out of the item, without going into the sub menu.\n                if (menuContext) {\n                    setTimeout(() => {\n                        menuContext.dispatch({type: 'leaveItem'});\n                    }, 100);\n                }\n            }}\n        />\n    );\n};\n\nexport type MenuProps = {\n    id: string,\n    actionKey: string,\n    menuRenderer?: React.FunctionComponent<MenuRendererProps>,\n    menuItemRenderer?: React.FunctionComponent<MenuItemRendererProps>,\n    menuItemProps?: object,\n    isMenuPreload?: boolean,\n    menuTarget: string,\n    menuFilter?: () => boolean,\n    isMenuUseEventPosition?: boolean,\n    buttonIcon?: React.ReactElement,\n    originalContext?: object,\n    rootMenuContext?: MenuContext,\n    parentMenuContext?: MenuContext,\n    menuContext: MenuContext,\n    menuState?: MenuState\n}\n\nexport type MenuRendererProps = {\n    id: string,\n    context: object,\n    menuKey: string,\n    isOpen: boolean,\n    isSubMenu: boolean,\n    isLoading: boolean,\n    anchor: Anchor,\n    onMouseEnter?: (event: React.MouseEvent) => void,\n    onMouseLeave?: (event: React.MouseEvent) => void\n    onClose?: (event: Event) => void\n    onExited?: (event: Event) => void\n}\n\nconst Menu = (props: MenuProps) => {\n    const {\n        menuTarget,\n        menuFilter,\n        isMenuPreload,\n        menuRenderer: MenuRenderer,\n        menuItemRenderer,\n        rootMenuContext,\n        originalContext,\n        id,\n        actionKey,\n        menuContext,\n        menuState,\n        menuItemProps\n    } = props;\n    return (\n        <MenuRenderer\n            id={id}\n            context={{key: props.id, ...props}}\n            menuKey={actionKey}\n            isSubMenu={menuState.isSubMenu}\n            anchor={menuState.anchor}\n            isLoading={menuState.loadingItems.length > 0}\n            isOpen={menuState.isOpen}\n            onMouseEnter={() => {\n                menuContext.dispatch({type: 'enterMenu'});\n            }}\n            onMouseLeave={() => {\n                menuContext.dispatch({type: 'leaveMenu'});\n            }}\n            onClose={e => {\n                e.preventDefault();\n                e.stopPropagation();\n                menuContext.dispatch({type: 'close'});\n            }}\n            onExited={() => {\n                if (!isMenuPreload) {\n                    menuContext.dispatch({type: 'destroy'});\n                }\n            }}\n        >\n            <DisplayActions\n                {...originalContext}\n                id={id}\n                target={menuTarget}\n                filter={menuFilter}\n                buttonProps={menuItemProps}\n                menuRenderer={MenuRenderer}\n                menuItemRenderer={menuItemRenderer}\n                parentMenuContext={menuContext}\n                rootMenuContext={rootMenuContext}\n                loading={ItemLoading}\n                render={ItemRender}\n            />\n        </MenuRenderer>\n    );\n};\n\nfunction add(items: string[], item: string) {\n    return items.indexOf(item) === -1 ? [...items, item] : items;\n}\n\nfunction remove(items: string[], item: string) {\n    return items.filter(f => f !== item);\n}\n\ntype MenuState = {\n    id: string,\n    currentCtx: object & { originalContext?: object },\n    anchor: Anchor,\n    isRendered: boolean,\n    isOpen: boolean,\n    isInMenu: boolean,\n    isSubMenu: boolean,\n    subMenuContext?: MenuContext,\n    loadingItems: string[],\n    loadedItems: string[]\n}\n\ntype ActionType =\n    { type: 'render', currentCtx: object } | { type: 'destroy' } |\n    { type: 'open', anchor: Anchor } | { type: 'close' } | { type: 'leaveItem' } |\n    { type: 'enterMenu' } | { type: 'leaveMenu' } | { type: 'setSubMenuContext', value: MenuContext } |\n    { type: 'loading', item: string } | { type: 'loaded', item: string, isVisible: boolean };\n\ntype ReducerType = (state: MenuState, action: ActionType) => MenuState;\n\nconst reducer: ReducerType = (state, action) => {\n    switch (action.type) {\n        case 'render':\n            return {\n                ...state,\n                currentCtx: action.currentCtx ? action.currentCtx : {},\n                isRendered: true\n            };\n        case 'destroy':\n            return {\n                ...state,\n                isRendered: false\n            };\n        case 'open':\n            return {\n                ...state,\n                isOpen: true,\n                anchor: action.anchor\n            };\n        case 'close':\n            return {...state, isOpen: false};\n        case 'leaveItem':\n            return {...state, isOpen: state.isInMenu};\n        case 'enterMenu':\n            return {...state, isInMenu: true};\n        case 'leaveMenu':\n            return {...state, isInMenu: false};\n        case 'setSubMenuContext': {\n            if (state.subMenuContext === action.value) {\n                return state;\n            }\n\n            if (state.subMenuContext && state.subMenuContext !== action.value) {\n                setTimeout(() => {\n                    state.subMenuContext.dispatch({type: 'close'});\n                }, 0);\n            }\n\n            return {...state, subMenuContext: action.value};\n        }\n\n        case 'loading':\n            return (state.loadingItems.includes(action.item) || state.loadedItems.includes(action.item)) ? state : {\n                ...state,\n                loadingItems: add(state.loadingItems, action.item),\n                loadedItems: remove(state.loadedItems, action.item)\n            };\n        case 'loaded':\n            return (!state.loadingItems.includes(action.item) && (action.isVisible !== false) === state.loadedItems.includes(action.item)) ? state : {\n                ...state,\n                loadingItems: remove(state.loadingItems, action.item),\n                loadedItems: action.isVisible === false ? remove(state.loadedItems, action.item) : add(state.loadedItems, action.item)\n            };\n        default:\n            return state;\n    }\n};\n\nexport type MenuActionComponentProps = {\n    /**\n     * Action unique id\n     */\n    id: string,\n\n    /**\n     * Renderer used to render the menu\n     */\n    menuRenderer?: React.FunctionComponent,\n\n    actionKey: string,\n\n    /**\n     * Renderer used to render an item in the menu\n     */\n    menuItemRenderer?: React.FunctionComponent,\n\n    /**\n     * Should the actions of the menu be preloaded\n     */\n    isMenuPreload?: boolean,\n\n    /**\n     * Target defining which actions to display in the menu\n     */\n    menuTarget: string,\n\n    /**\n     * Filter actions to display in the menu\n     */\n    menuFilter?: () => boolean,\n\n    /**\n     * Should the menu be displayed at the event position, or under the current element\n     */\n    isMenuUseEventPosition?: boolean,\n\n    /**\n     * Props passed to the main DisplayAction\n     */\n    originalContext?: object,\n\n    /**\n     * Root menu context, if sub menu (internal)\n     */\n    rootMenuContext?: MenuContext,\n\n    /**\n     * Parent menu context, if sub menu (internal)\n     */\n    parentMenuContext?: MenuContext,\n\n    /**\n     * Render for the action button\n     */\n    render: React.FunctionComponent<any>,\n\n    /**\n     * Render for the action button\n     */\n    loading: React.FunctionComponent<any>,\n    /**\n     * Helps determine if action is visible\n     */\n    visibilityPredicate?: (state: MenuState) => boolean\n}\n\nconst MenuActionComponent = (props: MenuActionComponentProps) => {\n    const {\n        rootMenuContext,\n        parentMenuContext,\n        isMenuPreload,\n        render: Render,\n        loading: Loading,\n        visibilityPredicate\n    } = props;\n    const id = 'actionComponent-' + props.id;\n\n    const elRef = useRef(document.getElementById('menuHolder'));\n    if (!elRef.current) {\n        elRef.current = document.createElement('div');\n        elRef.current.setAttribute('id', 'menuHolder');\n        document.body.appendChild(elRef.current);\n    }\n\n    const [menuState, dispatch] = useReducer<Reducer<MenuState, ActionType>>(reducer, {\n        id,\n        isRendered: false,\n        isOpen: false,\n        isSubMenu: Boolean(parentMenuContext),\n        isInMenu: false,\n        loadingItems: [],\n        loadedItems: [],\n        subMenuContext: null,\n        currentCtx: {},\n        anchor: {\n            anchorPosition: {\n                top: -1000,\n                left: -1000\n            }\n        }\n    });\n\n    const menuContext: MenuContext = useMemo(() => ({\n        id,\n        dispatch,\n        display(currentCtx: object, anchor: Anchor) {\n            dispatch({type: 'render', currentCtx});\n            // If there's a parent, set the current context as submenu. Previous value should be null\n            if (parentMenuContext) {\n                parentMenuContext.dispatch({type: 'setSubMenuContext', value: menuContext});\n            }\n\n            // Delay open to get animation\n            setTimeout(() => {\n                dispatch({type: 'open', anchor});\n            }, 0);\n        }\n    }), [id, parentMenuContext]);\n\n    useEffect(() => {\n        if (!menuState.isOpen && menuState.subMenuContext) {\n            menuState.subMenuContext.dispatch({type: 'close'});\n            dispatch({type: 'setSubMenuContext', value: null});\n        }\n    }, [id, menuState, menuContext]);\n\n    let isVisible = !isMenuPreload || menuState.loadedItems.length > 0;\n\n    if (visibilityPredicate) {\n        isVisible = visibilityPredicate(menuState);\n    }\n\n    return (\n        <>\n            {menuState.isOpen && menuState.loadingItems.length > 0 && Loading ? (\n                <Loading {...props}/>\n            ) : (\n                <Render\n                    {...props}\n                    menuContext={menuContext}\n                    menuState={menuState}\n                    isVisible={isVisible}\n                    onClick={(eventProps: MenuProps, event: React.MouseEvent) => {\n                        // Handle click to open menu only if not in a submenu (already handled on mouse over)\n                        if (!parentMenuContext) {\n                            if (event.currentTarget && !eventProps.isMenuUseEventPosition) {\n                                // Copy position of target element as it may be removed after load\n                                const boundingClientRect = event.currentTarget.getBoundingClientRect();\n                                const targetMock = {\n                                    ...event.currentTarget,\n                                    getBoundingClientRect: () => boundingClientRect\n                                };\n                                menuContext.display(eventProps, {\n                                    anchorEl: targetMock,\n                                    anchorElOrigin: {\n                                        vertical: 'bottom',\n                                        horizontal: 'left'\n                                    }\n                                });\n                            } else {\n                                menuContext.display(eventProps, {\n                                    anchorPosition: {\n                                        left: event.clientX,\n                                        top: event.clientY\n                                    }\n                                });\n                            }\n                        }\n                    }}\n                />\n            )}\n            {(menuState.isRendered || isMenuPreload) && ReactDOM.createPortal(\n                <Menu\n                    {...props}\n                    {...menuState.currentCtx.originalContext}\n                    originalContext={{...props.originalContext, ...menuState.currentCtx.originalContext}}\n                    menuContext={menuContext}\n                    menuState={menuState}\n                    rootMenuContext={rootMenuContext ? rootMenuContext : menuContext}\n                />, elRef.current\n            )}\n        </>\n    );\n};\n\n/**\n * Context properties :\n *\n * menu : name of the target of actions to display in the menu\n * menuRenderer\n * menuItemRenderer\n */\nconst menuAction = {\n    component: MenuActionComponent\n};\n\nexport {menuAction, MenuActionComponent};\n"],"mappings":"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"}