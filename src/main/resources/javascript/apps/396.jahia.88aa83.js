"use strict";(self.webpackChunk_jahia_meaningCloudServices=self.webpackChunk_jahia_meaningCloudServices||[]).push([[396],{676:(e,t,r)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:()=>n})},9968:(e,t,r)=>{function n(e){if(Array.isArray(e))return e}r.d(t,{Z:()=>n})},3349:(e,t,r)=>{function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}r.d(t,{Z:()=>n})},6610:(e,t,r)=>{function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,{Z:()=>n})},5991:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(2863);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,n.Z)(i.key),i)}}function o(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}},6156:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(2863);function i(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},2122:(e,t,r)=>{function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}r.d(t,{Z:()=>n})},7608:(e,t,r)=>{function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}r.d(t,{Z:()=>n})},5255:(e,t,r)=>{function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}r.d(t,{Z:()=>i})},6410:(e,t,r)=>{function n(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}r.d(t,{Z:()=>n})},8970:(e,t,r)=>{function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(t,{Z:()=>n})},1253:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(9756);function i(e,t){if(null==e)return{};var r,i,o=(0,n.Z)(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++)r=u[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}},9756:(e,t,r)=>{function n(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}r.d(t,{Z:()=>n})},6070:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(484),i=r(3349);function o(e,t){if(t&&("object"===(0,n.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},8481:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(9968),i=r(2961),o=r(8970);function u(e,t){return(0,n.Z)(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,u,c=[],s=!0,a=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{if(!s&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(a)throw i}}return c}}(e,t)||(0,i.Z)(e,t)||(0,o.Z)()}},5061:(e,t,r)=>{r.d(t,{Z:()=>u});var n=r(676),i=r(6410),o=r(2961);function u(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||(0,i.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2863:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(484);function i(e){var t=function(e,t){if("object"!==(0,n.Z)(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!==(0,n.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===(0,n.Z)(t)?t:String(t)}},484:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r.d(t,{Z:()=>n})},2961:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(676);function i(e,t){if(e){if("string"==typeof e)return(0,n.Z)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?(0,n.Z)(e,t):void 0}}},8396:(e,t,r)=>{r.r(t),r.d(t,{ComponentRenderer:()=>k,ComponentRendererActionComponent:()=>X,ComponentRendererConsumer:()=>E,ComponentRendererContext:()=>Z,ComponentRendererProvider:()=>I,ContextualMenu:()=>pe,DisplayAction:()=>z,DisplayActions:()=>W,IframeRenderer:()=>h,MenuActionComponent:()=>ce,componentRendererAction:()=>Y,composeServices:()=>p,getIframeRenderer:()=>O,menuAction:()=>se,registry:()=>m,useAdminRouteTreeStructure:()=>q});var n=r(6156),i=r(5061),o=r(5365),u=r.n(o),c=r(1253),s=r(6610),a=r(5991),l=r(8481);function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return t&&Object.entries(t).forEach((function(t){var r=(0,l.Z)(t,2),n=r[0],o=r[1],u=e[n];"function"==typeof u&&"function"==typeof o?e[n]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.apply(this,[].concat(t,[u]))}:Array.isArray(u)&&Array.isArray(o)?e[n]=[].concat((0,i.Z)(u),(0,i.Z)(o)):e[n]=o})),e}),{})}var f=["target"];function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=new(function(){function e(){(0,s.Z)(this,e),this.registry={}}return(0,a.Z)(e,[{key:"addOrReplace",value:function(e,t){for(var r=e+"-"+t,n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];var u=p.apply(void 0,i),c=u.targets?u.targets.map((function(e){if("string"==typeof e){var t=e.split(":");return{id:t[0],priority:t[1]?t[1]:0}}return e})):[],s=y(y({},u),{},{targets:c,type:e,key:t});return this.registry[r]=s,s}},{key:"add",value:function(e,t){var r=e+"-"+t;if(this.registry[r])throw new Error("Entry already exist for key "+t);for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return this.addOrReplace.apply(this,[e,t].concat(i))}},{key:"get",value:function(e,t){return this.registry[e+"-"+t]}},{key:"remove",value:function(e,t){var r=this;if(t){var n=e+"-"+t;this.registry[n]&&delete this.registry[e+"-"+t]}else{var i=this.find({type:e});i&&i.forEach((function(t){return r.remove(e,t.key)}))}}},{key:"find",value:function(e){var t=Object.values(this.registry),r=e.target,n=(0,c.Z)(e,f);return r&&(t=t.filter((function(t){return t.targets&&t.targets.map((function(e){return e.id})).includes(e.target)})).sort((function(t,r){var n=t.targets&&t.targets.find((function(t){return t.id===e.target})),i=r.targets&&r.targets.find((function(t){return t.id===e.target})),o=n&&Number(n.priority),u=i&&Number(i.priority);return isNaN(o)&&isNaN(u)?0:isNaN(o)?-1:isNaN(u)?1:o-u}))),t.filter((function(e){return!Object.keys(n).find((function(t){return e[t]!==n[t]}))}))}},{key:"clear",value:function(){this.registry={}}}]),e}()),b=r(5697),g=r.n(b),h=function(e){var t,r,n,i=null===(t=window)||void 0===t||null===(r=t.jahia)||void 0===r||null===(n=r.ui)||void 0===n?void 0:n.IframeRenderer;return i?u().createElement(i,e):u().createElement("span",null,"Jahia UI not loaded")},O=function(e){return u().createElement(h,{url:e})};function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}h.propTypes={url:g().string.isRequired};var j=function e(t,r){return t.filter(r).map((function(t){return R(R({},t),{},{children:e(t.children,r)})}))},P=function e(t,r){return t.map((function(t){return R(R({},r(t)),{},{children:e(t.children,r)})}))},C=function(){function e(t){(0,s.Z)(this,e),this.data=t}return(0,a.Z)(e,[{key:"filter",value:function(t){return new e(j(this.data,t))}},{key:"map",value:function(t){return new e(P(this.data,t))}},{key:"getData",value:function(){return this.data}}]),e}();function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q=function(e,t){var r=(0,o.useMemo)((function(){var t=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return m.find({type:"adminRoute",target:t+r}).flatMap((function(r){return[r].concat((0,i.Z)(e(t,"-"+r.key)))})).map((function(e){return x(x({},e),{},{render:e.render||"string"==typeof e.iframeUrl&&function(){return O(e.iframeUrl)}})}))}(e),r=new C(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return m.find({type:"adminRoute",target:t+r}).filter((function(e){return!e.omitFromTree})).map((function(r){return x(x({},r),{},{children:e(t,"-"+r.key)})}))}(e)),n=t.filter((function(e){return e.requiredPermission})).map((function(e){return e.requiredPermission})).filter((function(e,t,r){return r.indexOf(e)===t}));return{routes:t,tree:r,allPermissions:n}}),[e]),n=r.tree,u=r.routes,c=r.allPermissions,s=[];if(t)for(var a=m.get("adminRoute",t);a;){var l=a.targets.find((function(t){return t.id.startsWith(e+"-")}));if(l){var p=l.id.substr(e.length+1);s.push(p),a=m.get("adminRoute",p)}else a=null}return{tree:n,defaultOpenedItems:s,routes:u,allPermissions:c}},Z=(0,o.createContext)({}),E=Z.Consumer;function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=function(){var e=(0,o.useState)({components:{},componentsProps:{}}),t=(0,l.Z)(e,2),r=t[0],n=t[1],i=(0,o.useContext)(Z);(0,o.useEffect)((function(){i.render=function(e,t,r){return n((function(n){var i={components:S({},n.components),componentsProps:S({},n.componentsProps)};return i.components[e]=t,i.componentsProps[e]=S({},r),i}))},i.setProperties=function(e,t){return n((function(r){if(r.components[e]){var n={components:S({},r.components),componentsProps:S({},r.componentsProps)};return n.componentsProps[e]=S(S({},r.componentsProps[e]),t),n}return r}))},i.destroy=function(e){return n((function(t){var r={components:S({},t.components),componentsProps:S({},t.componentsProps)};return delete r.components[e],delete r.componentsProps[e],r}))}}),[i]);var c=Object.keys(r.components).map((function(e){var t=r.components[e];return u().createElement(t,S({key:e},r.componentsProps[e]))}));return u().createElement(u().Fragment,null,c)},I=function(e){var t=e.children,r=(0,o.useRef)({});return u().createElement(Z.Provider,{value:r.current},u().createElement(k,null),t)};I.defaultProps={children:null},I.propTypes={children:g().element};var D=r(5255),T=r(6070),A=r(7608),_=r(2122),K=["context"],B=["context","actionKey","render","loading"];function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=0,z=function(e){(0,D.Z)(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,A.Z)(t);if(r){var i=(0,A.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,T.Z)(this,e)});function i(e){var t,r;return(0,s.Z)(this,i),(t=n.call(this,e)).id=e.actionKey+"-"+F++,t.RenderWrapper=(r=e.render,function(e){var t=e.context,n=(0,c.Z)(e,K);return u().createElement(r,(0,_.Z)({},t,n))}),t}return(0,a.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.context,r=e.actionKey,n=e.render,i=e.loading,o=(0,c.Z)(e,B),s=m.get("action",r);if(!s)return null;t&&console.warn("Warn : context in DisplayAction is deprecated",r,t);var a="function"==typeof s.component?s.component:n,l=U(U({},t),o),p=U(U(U({},s),l),{},{originalContext:l,id:this.id,actionKey:r});p.init&&p.init(p,this.props);var f={};if(f["data-registry-key"]=s.type+":"+s.key,o.target&&s.targets){var d=s.targets.find((function(e){return e.id===o.target}));d&&(f["data-registry-target"]=d.id+":"+d.priority)}return u().createElement(a,(0,_.Z)({key:this.id},p,{buttonProps:U(U({},p.buttonProps),f),context:p,render:this.RenderWrapper,loading:i}))}}]),i}(u().PureComponent);(0,n.Z)(z,"propTypes",{actionKey:g().string.isRequired,context:g().object});var V=["target","filter"],W=function(e){var t=e.target,r=e.filter,n=(0,c.Z)(e,V),i=m.find({type:"action",target:t});return r&&(i=i&&i.filter(r)),u().createElement(u().Fragment,null,i.map((function(e){return u().createElement(z,(0,_.Z)({},n,{key:e.key,target:t,actionKey:e.key}))})))};W.defaultProps={filter:null},W.propTypes={context:g().object,target:g().string.isRequired,render:g().func.isRequired,loading:g().func,filter:g().func};var L=["render","componentToRender"];function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var X=function(e){var t=e.render,r=e.componentToRender,n=(0,c.Z)(e,L),i=(0,o.useContext)(Z),s={};return(0,o.useEffect)((function(){s.id="actionComponent-"+n.id,s.render=function(e,t){i.render(s.id,e,J(J({},n),{},{onExited:s.handleDestroy},t))},s.handleDestroy=function(){i.destroy(s.id)},s.setProperties=function(e){i.setProperties(s.id,e)}})),n.onClick?u().createElement(t,n):u().createElement(t,(0,_.Z)({onClick:function(){return s.render(r)}},n))};X.propTypes={onClick:g().func.isRequired,id:g().string.isRequired,context:g().object.isRequired,render:g().func.isRequired,componentToRender:g().node};var Y={component:X},$=r(5850),G=r.n($);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te=function(e){var t=ee(ee({},e.context),e),r=t.id,n=t.parentMenuContext,i=t.menuItemRenderer;return(0,o.useEffect)((function(){n.dispatch({type:"loading",item:r})})),u().createElement(i,(0,_.Z)({},e,{onClick:function(){}}))};te.propTypes={id:g().string.isRequired,context:g().object,parentMenuContext:g().shape({id:g().string.isRequired,dispatch:g().func.isRequired,display:g().func.isRequired})};var re=function(e){var t=ee(ee({},e.context),e),r=t.id,n=t.onClick,i=t.menuContext,c=t.menuState,s=t.rootMenuContext,a=t.parentMenuContext,l=t.menuItemRenderer,p=t.isVisible;return(0,o.useEffect)((function(){a.dispatch({type:"loaded",item:r,isVisible:p})})),!1===p?null:u().createElement(l,(0,_.Z)({},e,{onClick:function(t){n&&(n(e,t),t.stopPropagation(),s.dispatch({type:"close"}))},onMouseEnter:function(e){if(i){if(c&&!c.isOpen){var t=e.currentTarget.getBoundingClientRect();i.display(null,{anchorEl:{getBoundingClientRect:function(){return t}},anchorElOrigin:{vertical:"top",horizontal:"right"}})}}else a.dispatch({type:"setSubMenuContext",value:null})},onMouseLeave:function(){i&&setTimeout((function(){i.dispatch({type:"leaveItem"})}),100)}}))};re.propTypes={context:g().object,id:g().string.isRequired,rootMenuContext:g().shape({id:g().string.isRequired,dispatch:g().func.isRequired,display:g().func.isRequired}),parentMenuContext:g().shape({id:g().string.isRequired,dispatch:g().func.isRequired,display:g().func.isRequired}),menuContext:g().shape({id:g().string.isRequired,dispatch:g().func.isRequired,display:g().func.isRequired}),menuState:g().shape({id:g().string.isRequired,currentCtx:g().oneOfType([g().object,g().shape({originalContext:g().object})]).isRequired,anchor:g().shape({anchorEl:g().any,anchorPosition:g().shape({top:g().number.isRequired,left:g().number.isRequired}),anchorElOrigin:g().shape({horizontal:g().oneOf(["left","center","right"]).isRequired,vertical:g().oneOf(["top","center","bottom"]).isRequired}),transformElOrigin:g().shape({horizontal:g().oneOf(["left","right"]).isRequired,vertical:g().oneOf(["top","bottom"]).isRequired})}).isRequired,isRendered:g().bool.isRequired,isOpen:g().bool.isRequired,isInMenu:g().bool.isRequired,isSubMenu:g().bool.isRequired,subMenuContext:g().shape({id:g().string.isRequired,dispatch:g().func.isRequired,display:g().func.isRequired}),loadingItems:g().arrayOf(g().string).isRequired,loadedItems:g().arrayOf(g().string).isRequired}),onClick:g().func,isVisible:g().bool};var ne=function(e){var t=e.menuTarget,r=e.menuFilter,n=e.isMenuPreload,i=e.menuRenderer,o=e.menuItemRenderer,c=e.rootMenuContext,s=e.originalContext,a=e.id,l=e.actionKey,p=e.menuContext,f=e.menuState,d=e.menuItemProps;return u().createElement(i,{id:a,context:ee({key:e.id},e),menuKey:l,isSubMenu:f.isSubMenu,anchor:f.anchor,isLoading:f.loadingItems.length>0,isOpen:f.isOpen,onMouseEnter:function(){p.dispatch({type:"enterMenu"})},onMouseLeave:function(){p.dispatch({type:"leaveMenu"})},onClose:function(e){e.preventDefault(),e.stopPropagation(),p.dispatch({type:"close"})},onExited:function(){n||p.dispatch({type:"destroy"})}},u().createElement(W,(0,_.Z)({},s,{id:a,target:t,filter:r,buttonProps:d,menuRenderer:i,menuItemRenderer:o,parentMenuContext:p,rootMenuContext:c,loading:te,render:re})))};function ie(e,t){return-1===e.indexOf(t)?[].concat((0,i.Z)(e),[t]):e}function oe(e,t){return e.filter((function(e){return e!==t}))}ne.propTypes={id:g().string.isRequired,actionKey:g().string.isRequired,menuItemProps:g().object,isMenuPreload:g().bool,menuTarget:g().string.isRequired,menuFilter:g().func,isMenuUseEventPosition:g().bool,buttonIcon:g().element,originalContext:g().object,rootMenuContext:g().shape({id:g().string.isRequired,dispatch:g().func.isRequired,display:g().func.isRequired}),parentMenuContext:g().shape({id:g().string.isRequired,dispatch:g().func.isRequired,display:g().func.isRequired}),menuContext:g().shape({id:g().string.isRequired,dispatch:g().func.isRequired,display:g().func.isRequired}).isRequired,menuState:g().shape({id:g().string.isRequired,currentCtx:g().oneOfType([g().object,g().shape({originalContext:g().object})]).isRequired,anchor:g().shape({anchorEl:g().any,anchorPosition:g().shape({top:g().number.isRequired,left:g().number.isRequired}),anchorElOrigin:g().shape({horizontal:g().oneOf(["left","center","right"]).isRequired,vertical:g().oneOf(["top","center","bottom"]).isRequired}),transformElOrigin:g().shape({horizontal:g().oneOf(["left","right"]).isRequired,vertical:g().oneOf(["top","bottom"]).isRequired})}).isRequired,isRendered:g().bool.isRequired,isOpen:g().bool.isRequired,isInMenu:g().bool.isRequired,isSubMenu:g().bool.isRequired,subMenuContext:g().shape({id:g().string.isRequired,dispatch:g().func.isRequired,display:g().func.isRequired}),loadingItems:g().arrayOf(g().string).isRequired,loadedItems:g().arrayOf(g().string).isRequired})};var ue=function(e,t){switch(t.type){case"render":return ee(ee({},e),{},{currentCtx:t.currentCtx?t.currentCtx:{},isRendered:!0});case"destroy":return ee(ee({},e),{},{isRendered:!1});case"open":return ee(ee({},e),{},{isOpen:!0,anchor:t.anchor});case"close":return ee(ee({},e),{},{isOpen:!1});case"leaveItem":return ee(ee({},e),{},{isOpen:e.isInMenu});case"enterMenu":return ee(ee({},e),{},{isInMenu:!0});case"leaveMenu":return ee(ee({},e),{},{isInMenu:!1});case"setSubMenuContext":return e.subMenuContext===t.value?e:(e.subMenuContext&&e.subMenuContext!==t.value&&setTimeout((function(){e.subMenuContext.dispatch({type:"close"})}),0),ee(ee({},e),{},{subMenuContext:t.value}));case"loading":return e.loadingItems.includes(t.item)||e.loadedItems.includes(t.item)?e:ee(ee({},e),{},{loadingItems:ie(e.loadingItems,t.item),loadedItems:oe(e.loadedItems,t.item)});case"loaded":return e.loadingItems.includes(t.item)||!1!==t.isVisible!==e.loadedItems.includes(t.item)?ee(ee({},e),{},{loadingItems:oe(e.loadingItems,t.item),loadedItems:!1===t.isVisible?oe(e.loadedItems,t.item):ie(e.loadedItems,t.item)}):e;default:return e}},ce=function(e){var t=e.rootMenuContext,r=e.parentMenuContext,n=e.isMenuPreload,i=e.render,c=e.loading,s=e.visibilityPredicate,a="actionComponent-"+e.id,p=(0,o.useRef)(document.getElementById("menuHolder"));p.current||(p.current=document.createElement("div"),p.current.setAttribute("id","menuHolder"),document.body.appendChild(p.current));var f=(0,o.useReducer)(ue,{id:a,isRendered:!1,isOpen:!1,isSubMenu:Boolean(r),isInMenu:!1,loadingItems:[],loadedItems:[],subMenuContext:null,currentCtx:{},anchor:{anchorPosition:{top:-1e3,left:-1e3}}}),d=(0,l.Z)(f,2),y=d[0],m=d[1],b=(0,o.useMemo)((function(){return{id:a,dispatch:m,display:function(e,t){m({type:"render",currentCtx:e}),r&&r.dispatch({type:"setSubMenuContext",value:b}),setTimeout((function(){m({type:"open",anchor:t})}),0)}}}),[a,r]);(0,o.useEffect)((function(){!y.isOpen&&y.subMenuContext&&(y.subMenuContext.dispatch({type:"close"}),m({type:"setSubMenuContext",value:null}))}),[a,y,b]);var g=!n||y.loadedItems.length>0;return s&&(g=s(y)),u().createElement(u().Fragment,null,y.isOpen&&y.loadingItems.length>0&&c?u().createElement(c,e):u().createElement(i,(0,_.Z)({},e,{menuContext:b,menuState:y,isVisible:g,onClick:function(e,t){if(!r)if(t.currentTarget&&!e.isMenuUseEventPosition){var n=t.currentTarget.getBoundingClientRect(),i=ee(ee({},t.currentTarget),{},{getBoundingClientRect:function(){return n}});b.display(e,{anchorEl:i,anchorElOrigin:{vertical:"bottom",horizontal:"left"}})}else b.display(e,{anchorPosition:{left:t.clientX,top:t.clientY}})}})),(y.isRendered||n)&&G().createPortal(u().createElement(ne,(0,_.Z)({},e,y.currentCtx.originalContext,{originalContext:ee(ee({},e.originalContext),y.currentCtx.originalContext),menuContext:b,menuState:y,rootMenuContext:t||b})),p.current))};ce.propTypes={id:g().string.isRequired,actionKey:g().string.isRequired,isMenuPreload:g().bool,menuTarget:g().string.isRequired,menuFilter:g().func,isMenuUseEventPosition:g().bool,originalContext:g().object,rootMenuContext:g().shape({id:g().string.isRequired,dispatch:g().func.isRequired,display:g().func.isRequired}),parentMenuContext:g().shape({id:g().string.isRequired,dispatch:g().func.isRequired,display:g().func.isRequired}),visibilityPredicate:g().func};var se={component:ce};function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pe=function(e){(0,D.Z)(i,e);var t,r,n=(t=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=(0,A.Z)(t);if(r){var i=(0,A.Z)(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return(0,T.Z)(this,e)});function i(e){var t;return(0,s.Z)(this,i),(t=n.call(this,e)).onClickRef=u().createRef(),t}return(0,a.Z)(i,[{key:"open",value:function(e,t){this.onClickRef.current(le(le(le({},this.props),{},{isMenuUseEventPosition:!0},t),{},{originalContext:le(le({},this.props),t)}),e),e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.props.setOpenRef;return t&&(t.current=this.open.bind(this)),u().createElement(z,(0,_.Z)({},this.props,{render:function(t){var r=t.onClick;return e.onClickRef.current=r,null}}))}}]),i}(u().Component);(0,n.Z)(pe,"propTypes",{actionKey:g().string.isRequired})}}]);
//# sourceMappingURL=396.jahia.88aa83.js.map